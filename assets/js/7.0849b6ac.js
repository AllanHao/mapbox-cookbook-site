(window.webpackJsonp=window.webpackJsonp||[]).push([[7,28],{109:function(e,t,i){"use strict";var n=i(159),o=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var a=i.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},110:function(e,t,i){"use strict";i(160);var n=i(16),o=i(15),a=i(4),r=i(17),s=i(68),l=i(97),c=s("species"),u=!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var p=s(e),h=!a(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),f=h?!a(function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[p](""),!t}):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var g=/./[p],v=i(r,p,""[e],function(e,t,i,n,o){return t.exec===l?h&&!o?{done:!0,value:g.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),m=v[0],x=v[1];n(String.prototype,e,m),o(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}}},114:function(e,t,i){"use strict";var n=i(82);i.n(n).a},131:function(e,t,i){"use strict";var n=i(5);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},142:function(e,t,i){"use strict";i.r(t);i(67),i(69),i(70),i(31);var n=i(75),o=i.n(n),a=(i(76),{name:"custom-map",props:{container:{type:String,default:"map-".concat((new Date).getTime())},height:{type:Number,default:400},mapStyle:{type:String,default:"mapbox://styles/huanglii/cjmn2rlvn0c8u2sl97kkiep6r"},center:{type:Array,default:function(){return[-74.5,40]}},zoom:{type:Number,default:9},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},scrollZoom:{type:Boolean,default:!0},pitch:{type:Number,default:0},bearing:{type:Number,default:0}},data:function(){return{map:null,maploaded:!1}},mounted:function(){var e=this.container,t=this.mapStyle,i=this.center,n=this.zoom,o=this.minZoom,a=this.maxZoom,r=this.scrollZoom,s=this.pitch,l=this.bearing;this.initMap({container:e,style:t,center:i,zoom:n,minZoom:o,maxZoom:a,scrollZoom:r,pitch:s,bearing:l}),window.addEventListener("resize",this.resize)},methods:{initMap:function(e){o.a.accessToken="pk.eyJ1IjoiaHVhbmdsaWkiLCJhIjoiY2pzNHBtendwMDZ2ZDQzbnVmZXdtMDlvdiJ9.GSija86yNNR4ssBtFFpx0g",this.map=new o.a.Map(e),this.map.addControl(new o.a.NavigationControl({showCompass:!1}),"top-left"),this.map.addControl(new o.a.FullscreenControl,"top-left"),this.map.on("load",this.handleMapLoaded)},handleMapLoaded:function(e){this.maploaded=!0,this.$emit("load",e.target),this.map.on("click",this.handleMapClick)},handleMapClick:function(e){var t=this.map.queryRenderedFeatures(e.point);if(t.length>0){var i=t[0],n=i.layer,a=i.properties;(new o.a.Popup).setLngLat(e.lngLat).setHTML(this.createPropHtml(n.id,a)).addTo(this.map)}},createPropHtml:function(e,t){return'\n      <div class="title"><b>'.concat(e,'</b></div>\n      <div class="content">\n        ').concat(Object.keys(t).map(function(e){return"".concat("<p><b>".concat(e,": </b>").concat(t[e],"</p>"))}).join(""),"\n      </div>\n    ")},resize:function(){this.map.resize()}}}),r=(i(114),i(0)),s=Object(r.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"map-wrapper"},[t("div",{style:{width:"100%",height:this.height+"px",borderRadius:"6px"},attrs:{id:this.container}},[this._t("custom")],2),this._v(" "),this.maploaded?this._t("default"):this._e()],2)},[],!1,null,null,null);t.default=s.exports},159:function(e,t,i){var n=i(18),o=i(68)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?i:a?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},160:function(e,t,i){"use strict";var n=i(97);i(32)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},180:function(e,t){},329:function(e,t,i){"use strict";var n=i(5),o=i(330),a=i(109);i(110)("search",1,function(e,t,i,r){return[function(i){var n=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},function(e){var t=r(i,e,this);if(t.done)return t.value;var s=n(e),l=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var u=a(s,l);return o(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]})},330:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},400:function(e,t,i){"use strict";i.r(t);var n=i(142),o=(i(329),i(249)),a=i(57),r=i(58),s=i(61),l=i(60),c=i(81),u=i(62),d=i(140),p=i(122),h=i(422),f=i(251),g=i(342),v=h.a.fp64LowPart,m=[0,0,0,255],x={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:m},getLineColor:{type:"accessor",value:m},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},y=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"getShaders",value:function(e){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var i=e.props,n=e.oldProps,o=e.changeFlags;if(Object(c.a)(Object(l.a)(t.prototype),"updateState",this).call(this,{props:i,oldProps:n,changeFlags:o}),i.fp64!==n.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,n=this.props,o=n.radiusScale,a=n.radiusMinPixels,r=n.radiusMaxPixels,s=n.stroked,l=n.filled,c=n.lineWidthUnits,u=n.lineWidthScale,d=n.lineWidthMinPixels,p=n.lineWidthMaxPixels,h="pixels"===c?i.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{stroked:s?1:0,filled:l,radiusScale:o,radiusMinPixels:a,radiusMaxPixels:r,lineWidthScale:u*h,lineWidthMinPixels:d,lineWidthMaxPixels:p})).draw()}},{key:"_getModel",value:function(e){return new f.a(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new g.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var i=t.startRow,n=t.endRow,o=this.use64bitPositions();if(e.constant=!o,o){var a=this.props,r=a.data,s=a.getPosition,l=e.value,c=i*e.size,u=Object(d.a)(r,i,n),p=u.iterable,h=u.objectInfo,f=!0,g=!1,m=void 0;try{for(var x,y=p[Symbol.iterator]();!(f=(x=y.next()).done);f=!0){var b=x.value;h.index++;var P=s(b,h);l[c++]=v(P[0]),l[c++]=v(P[1])}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}else e.value=new Float32Array(2)}}]),t}(p.a);y.layerName="ScatterplotLayer",y.defaultProps=x;var b=h.a.fp64LowPart,P={fp64:!1,getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0},getStrokeWidth:{deprecatedFor:"getWidth"}},w=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * width / 2.0;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace);\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var i=e.props,n=e.oldProps,o=e.changeFlags;if(Object(c.a)(Object(l.a)(t.prototype),"updateState",this).call(this,{props:i,oldProps:n,changeFlags:o}),i.fp64!==n.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,n=this.props,o=n.widthUnits,a=n.widthScale,r=n.widthMinPixels,s=n.widthMaxPixels,l="pixels"===o?i.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{widthScale:a*l,widthMinPixels:r,widthMaxPixels:s})).draw()}},{key:"_getModel",value:function(e){return new f.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new g.a({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(e,t){var i=t.startRow,n=t.endRow,o=this.use64bitPositions();if(e.constant=!o,o){var a=this.props,r=a.data,s=a.getSourcePosition,l=a.getTargetPosition,c=e.value,u=i*e.size,p=Object(d.a)(r,i,n),h=p.iterable,f=p.objectInfo,g=!0,v=!1,m=void 0;try{for(var x,y=h[Symbol.iterator]();!(g=(x=y.next()).done);g=!0){var P=x.value;f.index++;var w=s(P,f),_=l(P,f);c[u++]=b(w[0]),c[u++]=b(w[1]),c[u++]=b(_[0]),c[u++]=b(_[1])}}catch(e){v=!0,m=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw m}}}else e.value=new Float32Array(4)}}]),t}(p.a);w.layerName="LineLayer",w.defaultProps=P;var _={AIRPORTS:"https://uber.osgis.cn/uber-common/deck.gl-data/master/website/airports.json",FLIGHT_PATHS:"https://uber.osgis.cn/uber-common/deck.gl-data/master/examples/line/heathrow-flights.json"},C={latitude:47.65,longitude:7,zoom:4.5,maxZoom:16,pitch:50,bearing:0};function S(e){var t=e.start[2]/1e4;return[255*(1-2*t),128*t,255*t,255*(1-t)]}var M={components:{customMap:n.default},data:function(){return{container:"m-deckgl-line",center:[7,47.65],zoom:4.5,pitch:50,bearing:0,style:"mapbox://styles/mapbox/dark-v9?optimize=true",canvasId:"line-canvas"}},methods:{handleMapLoaded:function(e){!function(e,t){new o.a({id:t,canvas:t,width:"100%",height:"100%",style:{postion:"relative",top:"0px"},initialViewState:C,controller:!0,onViewStateChange:function(t){var i=t.viewState;e.jumpTo({center:[i.longitude,i.latitude],zoom:i.zoom,bearing:i.bearing,pitch:i.pitch})},layers:[new y({id:"airports",data:_.AIRPORTS,radiusScale:20,getPosition:function(e){return e.coordinates},getFillColor:[255,140,0],getRadius:function(e){return(t=e.type).search("major")>=0?100:t.search("small")>=0?30:60;var t}}),new w({id:"flight-paths",data:_.FLIGHT_PATHS,getSourcePosition:function(e){return e.start},getTargetPosition:function(e){return e.end},getColor:S,getWidth:3})]})}(e,this.canvasId)}}},j=i(0),k=Object(j.a)(M,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("custom-map",{attrs:{container:e.container,center:e.center,zoom:e.zoom,pitch:e.pitch,mapStyle:e.style,bearing:e.bearing},on:{load:e.handleMapLoaded}},[i("canvas",{staticStyle:{"z-index":"2"},attrs:{slot:"custom",id:e.canvasId},slot:"custom"})])},[],!1,null,null,null);t.default=k.exports},82:function(e,t,i){},97:function(e,t,i){"use strict";var n,o,a=i(131),r=RegExp.prototype.exec,s=String.prototype.replace,l=r,c=(n=/a/,o=/b*/g,r.call(n,"a"),r.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,i,n,o,l=this;return u&&(i=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),c&&(t=l.lastIndex),n=r.call(l,e),c&&n&&(l.lastIndex=l.global?n.index+n[0].length:t),u&&n&&n.length>1&&s.call(n[0],i,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n}),e.exports=l}}]);